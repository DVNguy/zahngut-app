<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Zahngut</title>
  <link rel="stylesheet" href="/admin-styles.css">
</head>
<body>
  <div id="admin-app">
    <header class="admin-header">
      <div class="header-content">
        <h1>ü¶∑ Zahngut Admin</h1>
        <div class="header-actions">
          <button class="btn-secondary" id="previewBtn">üëÅÔ∏è Vorschau</button>
          <button class="btn-danger" id="logoutBtn">Abmelden</button>
        </div>
      </div>
    </header>

    <div class="admin-container">
      <nav class="admin-sidebar">
        <button class="tab-btn active" data-tab="grunddaten">üìã Grunddaten</button>
        <button class="tab-btn" data-tab="news">üì∞ Aktuelles</button>
        <button class="tab-btn" data-tab="behandlungen">ü¶∑ Behandlungen</button>
        <button class="tab-btn" data-tab="videos">üé• Videos</button>
        <button class="tab-btn" data-tab="nachsorge">üìù Nachsorge</button>
        <button class="tab-btn" data-tab="oeffnungszeiten">üïê √ñffnungszeiten</button>
        <button class="tab-btn" data-tab="notfall">üö® Notfall</button>
      </nav>

      <main class="admin-content">
        <div id="notification" class="notification"></div>

        <!-- Tab: Grunddaten -->
        <div class="tab-content active" id="grunddaten-tab">
          <h2>Praxis-Grunddaten</h2>
          <form id="praxisForm" class="admin-form">
            <div class="form-group">
              <label>Praxis-Name</label>
              <input type="text" id="praxisName" required />
            </div>
            <div class="form-group">
              <label>Slogan</label>
              <input type="text" id="praxisSlogan" required />
            </div>
            <div class="form-group">
              <label>Telefon</label>
              <input type="tel" id="praxisTelefon" required />
            </div>
            <div class="form-group">
              <label>Notdienst</label>
              <input type="tel" id="praxisNotdienst" required />
            </div>
            <div class="form-group">
              <label>E-Mail</label>
              <input type="email" id="praxisEmail" required />
            </div>
            <div class="form-group">
              <label>Doctolib URL</label>
              <input type="url" id="praxisDoctolib" />
            </div>
            <div class="form-group">
              <label>Stra√üe</label>
              <input type="text" id="praxisStreet" required />
            </div>
            <div class="form-group">
              <label>PLZ</label>
              <input type="text" id="praxisZip" required />
            </div>
            <div class="form-group">
              <label>Ort</label>
              <input type="text" id="praxisCity" required />
            </div>
            <button type="submit" class="btn-primary">üíæ Speichern</button>
          </form>
        </div>

        <!-- Tab: News/Aktuelles -->
        <div class="tab-content" id="news-tab">
          <div class="tab-header">
            <h2>Aktuelles verwalten</h2>
            <button class="btn-primary" id="addNewsBtn">‚ûï Neue Meldung</button>
          </div>

          <div id="newsModal" class="modal">
            <div class="modal-content">
              <div class="modal-header">
                <h3 id="newsModalTitle">Neue Meldung erstellen</h3>
                <button class="close-btn" id="closeNewsModal">&times;</button>
              </div>
              <form id="newsForm" class="admin-form">
                <input type="hidden" id="newsId" />
                <div class="form-group">
                  <label>Titel</label>
                  <input type="text" id="newsTitle" required />
                </div>
                <div class="form-group">
                  <label>Inhalt</label>
                  <textarea id="newsContent" rows="6" required></textarea>
                </div>
                <div class="form-group">
                  <label>Bild URL (optional)</label>
                  <input type="url" id="newsImageUrl" placeholder="https://..." />
                  <small>Link zu einem Bild (z.B. von Pexels oder Unsplash)</small>
                </div>
                <div class="form-group">
                  <label>Video URL (optional)</label>
                  <input type="url" id="newsVideoUrl" placeholder="https://..." />
                  <small>Link zu einem Video (MP4 Format)</small>
                </div>
                <div class="form-group">
                  <label>Reihenfolge</label>
                  <input type="number" id="newsDisplayOrder" value="0" />
                  <small>H√∂here Zahlen werden weiter oben angezeigt</small>
                </div>
                <div class="form-group">
                  <label class="checkbox-label">
                    <input type="checkbox" id="newsPublished" />
                    <span>Ver√∂ffentlicht (sichtbar f√ºr Patienten)</span>
                  </label>
                </div>
                <div class="form-actions">
                  <button type="button" class="btn-secondary" id="cancelNewsBtn">Abbrechen</button>
                  <button type="submit" class="btn-primary">üíæ Speichern</button>
                </div>
              </form>
            </div>
          </div>

          <div id="newsList" class="items-list">
            <!-- News items will be loaded here -->
          </div>
        </div>

        <!-- Tab: Behandlungen -->
        <div class="tab-content" id="behandlungen-tab">
          <div class="tab-header">
            <h2>Behandlungen</h2>
            <button class="btn-primary" id="addTreatmentBtn">+ Neue Behandlung</button>
          </div>
          <div id="treatmentsList" class="items-list"></div>
        </div>

        <!-- Tab: Videos -->
        <div class="tab-content" id="videos-tab">
          <div class="tab-header">
            <h2>Aufkl√§rungsvideos</h2>
            <button class="btn-primary" id="addVideoBtn">+ Neues Video</button>
          </div>
          <div id="videosList" class="items-list"></div>
        </div>

        <!-- Tab: Nachsorge -->
        <div class="tab-content" id="nachsorge-tab">
          <div class="tab-header">
            <h2>Nachsorge-Anweisungen</h2>
            <button class="btn-primary" id="addAftercareBtn">+ Neue Nachsorge</button>
          </div>
          <div id="aftercareList" class="items-list"></div>
        </div>

        <!-- Tab: √ñffnungszeiten -->
        <div class="tab-content" id="oeffnungszeiten-tab">
          <h2>√ñffnungszeiten</h2>
          <form id="hoursForm" class="admin-form">
            <div id="hoursList"></div>
            <button type="submit" class="btn-primary">üíæ Speichern</button>
          </form>
        </div>

        <!-- Tab: Notfall -->
        <div class="tab-content" id="notfall-tab">
          <h2>Notfall-Informationen</h2>
          <form id="emergencyForm" class="admin-form">
            <div class="form-group">
              <label>Notdienst-Nummer</label>
              <input type="tel" id="emergencyNumber" required />
            </div>
            <div class="form-group">
              <label>Zeiten</label>
              <input type="text" id="emergencyZeiten" required />
            </div>
            <div class="form-group">
              <label>Erste-Hilfe-Anweisungen (eine pro Zeile)</label>
              <textarea id="emergencyInstructions" rows="6"></textarea>
            </div>
            <div class="form-group">
              <label>Zahn ausgeschlagen - Anleitung</label>
              <textarea id="emergencyZahnAus" rows="3"></textarea>
            </div>
            <div class="form-group">
              <label>Zahn locker - Anleitung</label>
              <textarea id="emergencyZahnLocker" rows="3"></textarea>
            </div>
            <button type="submit" class="btn-primary">üíæ Speichern</button>
          </form>
        </div>
      </main>
    </div>
  </div>

  <!-- Modal for Treatment Edit -->
  <div id="treatmentModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="treatmentModalTitle">Behandlung bearbeiten</h3>
        <button class="modal-close">&times;</button>
      </div>
      <form id="treatmentForm" class="admin-form">
        <input type="hidden" id="treatmentId" />
        <div class="form-group">
          <label>Name</label>
          <input type="text" id="treatmentName" required />
        </div>
        <div class="form-group">
          <label>Kategorie</label>
          <select id="treatmentCategory" required>
            <option value="Zahnerhaltung">Zahnerhaltung</option>
            <option value="Zahnersatz">Zahnersatz</option>
            <option value="Chirurgie">Chirurgie</option>
            <option value="Implantologie">Implantologie</option>
          </select>
        </div>
        <div class="form-group">
          <label>Icon</label>
          <div class="icon-upload-group">
            <input type="text" id="treatmentIcon" placeholder="Emoji eingeben (z.B. ü¶∑)" />
            <span style="margin: 0 12px; color: #94A3B8;">oder</span>
            <div class="file-upload-wrapper">
              <input type="file" id="treatmentIconFile" accept="image/png,image/jpeg,image/webp,image/svg+xml" />
              <label for="treatmentIconFile" class="btn-file-upload">üìÅ Bild hochladen</label>
              <div class="file-upload-hint">Empfohlen: 128x128px, PNG/JPG/WebP/SVG (max. 5MB)</div>
            </div>
          </div>
          <div id="treatmentIconPreview" class="icon-preview"></div>
        </div>
        <div class="form-group">
          <label>Untertitel</label>
          <input type="text" id="treatmentUntertitel" required />
        </div>
        <div class="form-group">
          <label>Was ist das?</label>
          <textarea id="treatmentWas" rows="4" required></textarea>
        </div>
        <div class="form-group">
          <label>Ablauf (einer pro Zeile)</label>
          <textarea id="treatmentAblauf" rows="4"></textarea>
        </div>
        <div class="form-group">
          <label>Vorteile (einer pro Zeile)</label>
          <textarea id="treatmentVorteile" rows="4"></textarea>
        </div>
        <div class="form-group">
          <label>Dauer</label>
          <input type="text" id="treatmentDauer" required />
        </div>
        <div class="form-group">
          <label>Empfohlen</label>
          <input type="text" id="treatmentEmpfohlen" required />
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="treatmentActive" />
            Aktiv (f√ºr Patienten sichtbar)
          </label>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary modal-close">Abbrechen</button>
          <button type="submit" class="btn-primary">Speichern</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal for Video Edit -->
  <div id="videoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="videoModalTitle">Video bearbeiten</h3>
        <button class="modal-close">&times;</button>
      </div>
      <form id="videoForm" class="admin-form">
        <input type="hidden" id="videoId" />
        <div class="form-group">
          <label>Titel</label>
          <input type="text" id="videoTitle" required />
        </div>
        <div class="form-group">
          <label>Kategorie</label>
          <select id="videoCategory" required>
            <option value="Zahnerhaltung">Zahnerhaltung</option>
            <option value="Zahnersatz">Zahnersatz</option>
            <option value="Chirurgie">Chirurgie</option>
            <option value="Implantologie">Implantologie</option>
            <option value="Allgemein">Allgemein</option>
          </select>
        </div>
        <div class="form-group">
          <label>Icon</label>
          <div class="icon-upload-group">
            <input type="text" id="videoIcon" placeholder="Emoji eingeben (z.B. üé•)" />
            <span style="margin: 0 12px; color: #94A3B8;">oder</span>
            <div class="file-upload-wrapper">
              <input type="file" id="videoIconFile" accept="image/png,image/jpeg,image/webp,image/svg+xml" />
              <label for="videoIconFile" class="btn-file-upload">üìÅ Bild hochladen</label>
              <div class="file-upload-hint">Empfohlen: 128x128px, PNG/JPG/WebP/SVG (max. 5MB)</div>
            </div>
          </div>
          <div id="videoIconPreview" class="icon-preview"></div>
        </div>
        <div class="form-group">
          <label>YouTube Video ID oder Embed URL</label>
          <input type="text" id="videoUrl" required placeholder="z.B. dQw4w9WgXcQ oder https://www.youtube.com/embed/..." />
          <small>Entweder die YouTube Video ID oder die komplette Embed URL</small>
        </div>
        <div class="form-group">
          <label>Thumbnail URL (optional)</label>
          <input type="url" id="videoThumbnail" placeholder="https://..." />
          <small>Falls leer, wird automatisch YouTube Thumbnail verwendet</small>
        </div>
        <div class="form-group">
          <label>Kurzbeschreibung</label>
          <textarea id="videoDescription" rows="3" required></textarea>
        </div>
        <div class="form-group">
          <label>Dauer (z.B. "5:30")</label>
          <input type="text" id="videoDuration" placeholder="5:30" />
        </div>
        <div class="form-group">
          <label>Reihenfolge</label>
          <input type="number" id="videoOrder" value="0" />
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="videoActive" />
            Aktiv (f√ºr Patienten sichtbar)
          </label>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary modal-close">Abbrechen</button>
          <button type="submit" class="btn-primary">Speichern</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal for Aftercare Edit -->
  <div id="aftercareModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="aftercareModalTitle">Nachsorge bearbeiten</h3>
        <button class="modal-close">&times;</button>
      </div>
      <form id="aftercareForm" class="admin-form">
        <input type="hidden" id="aftercareId" />
        <div class="form-group">
          <label>Behandlung</label>
          <input type="text" id="aftercareName" required />
        </div>
        <div class="form-group">
          <label>Icon</label>
          <div class="icon-upload-group">
            <input type="text" id="aftercareIcon" placeholder="Emoji eingeben (z.B. üìù)" />
            <span style="margin: 0 12px; color: #94A3B8;">oder</span>
            <div class="file-upload-wrapper">
              <input type="file" id="aftercareIconFile" accept="image/png,image/jpeg,image/webp,image/svg+xml" />
              <label for="aftercareIconFile" class="btn-file-upload">üìÅ Bild hochladen</label>
              <div class="file-upload-hint">Empfohlen: 128x128px, PNG/JPG/WebP/SVG (max. 5MB)</div>
            </div>
          </div>
          <div id="aftercareIconPreview" class="icon-preview"></div>
        </div>
        <div class="form-group">
          <label>Zeitraum (z.B. "2-4 Wochen")</label>
          <input type="text" id="aftercareTime" required />
        </div>
        <div class="form-group">
          <label>Kurzbeschreibung</label>
          <textarea id="aftercareDescription" rows="3" required></textarea>
        </div>
        <div class="form-group">
          <label>Warnsignale (einer pro Zeile)</label>
          <textarea id="aftercareWarnings" rows="4" placeholder="Starke Schmerzen&#10;Blutungen&#10;Schwellungen"></textarea>
        </div>
        <div class="form-group">
          <label>Phasen (JSON Format)</label>
          <textarea id="aftercarePhases" rows="8" placeholder='[{"title":"Erste 24h","time":"Tag 1","items":["Nicht sp√ºlen","K√ºhlen"]},{"title":"Tag 2-7","time":"Woche 1","items":["Vorsichtig putzen"]}]'></textarea>
          <small>JSON Array mit Phasen. Jede Phase hat: title, time, items (Array)</small>
        </div>
        <div class="form-group">
          <label>Reihenfolge</label>
          <input type="number" id="aftercareOrder" value="0" />
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="aftercareActive" />
            Aktiv (f√ºr Patienten sichtbar)
          </label>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary modal-close">Abbrechen</button>
          <button type="submit" class="btn-primary">Speichern</button>
        </div>
      </form>
    </div>
  </div>

  <script type="module" src="/admin-app.js"></script>
</body>
</html>
